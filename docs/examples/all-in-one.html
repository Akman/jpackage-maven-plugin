<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.2 from src\site\markdown/examples\all-in-one.md.vm
 | Rendered using Apache Maven Fluido Skin 1.9
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.9.2" />
    <title>JPackage Maven Plugin &#x2013; Create application installer avoiding any intermediate steps</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.9.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script src="../js/apache-maven-fluido-1.9.min.js"></script>
  </head>
  <body class="topBarEnabled">
    <a href="https://github.com/akman/jpackage-maven-plugin">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"
        alt="Fork me on GitHub">
    </a>
    <header id="topbar" class="navbar navbar-fixed-top navbar-inverse">
      <div class="navbar-inner">
        <div class="container-fluid">
        <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
<a class="brand" href="../index.html"  title="JPackage Maven Plugin"><img src="../images/bean.png" alt="JPackage Maven Plugin" />
</a>
            <ul class="nav">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Overview <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="../index.html" title="Introduction">Introduction</a></li>
            <li><a href="../plugin-info.html" title="Goals">Goals</a></li>
            <li><a href="../usage.html" title="Usage">Usage</a></li>
            <li><a href="../faq.html" title="FAQ">FAQ</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Examples <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="../examples/from-runtime-image.html" title="Create application image from a predefined runtime image">Create application image from a predefined runtime image</a></li>
            <li><a href="../examples/from-application-image.html" title="Create application installer from the predefined application image">Create application installer from the predefined application image</a></li>
            <li><a href="../examples/all-in-one.html" title="Create application installer avoiding any intermediate steps">Create application installer avoiding any intermediate steps</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li class="dropdown-submenu">
<a href="../project-info.html" title="Project Information">Project Information</a>
              <ul class="dropdown-menu">
                  <li><a href="../index.html" title="About">About</a></li>
                  <li><a href="../summary.html" title="Summary">Summary</a></li>
                  <li><a href="../dependencies.html" title="Dependencies">Dependencies</a></li>
                  <li><a href="../plugin-management.html" title="Plugin Management">Plugin Management</a></li>
                  <li><a href="../plugins.html" title="Plugins">Plugins</a></li>
                  <li><a href="../distribution-management.html" title="Distribution Management">Distribution Management</a></li>
                  <li><a href="../scm.html" title="Source Code Management">Source Code Management</a></li>
                  <li><a href="../issue-management.html" title="Issue Management">Issue Management</a></li>
                  <li><a href="../ci-management.html" title="CI Management">CI Management</a></li>
                  <li><a href="../licenses.html" title="Licenses">Licenses</a></li>
                  <li><a href="../team.html" title="Team">Team</a></li>
              </ul>
            </li>
            <li class="dropdown-submenu">
<a href="../project-reports.html" title="Project Reports">Project Reports</a>
              <ul class="dropdown-menu">
                  <li><a href="../xref/index.html" title="Source Xref">Source Xref</a></li>
                  <li><a href="../xref-test/index.html" title="Test Source Xref">Test Source Xref</a></li>
                  <li><a href="../plugin-info.html" title="Plugin Documentation">Plugin Documentation</a></li>
                  <li><a href="../apidocs/index.html" title="Javadoc">Javadoc</a></li>
                  <li><a href="../testapidocs/index.html" title="Test Javadoc">Test Javadoc</a></li>
                  <li><a href="../property-updates-report.html" title="Property Updates Report">Property Updates Report</a></li>
                  <li><a href="../plugin-updates-report.html" title="Plugin Updates Report">Plugin Updates Report</a></li>
                  <li><a href="../dependency-updates-report.html" title="Dependency Updates Report">Dependency Updates Report</a></li>
                  <li><a href="../dependency-analysis.html" title="Dependency Analysis">Dependency Analysis</a></li>
                  <li><a href="../checkstyle.html" title="Checkstyle">Checkstyle</a></li>
                  <li><a href="../pmd.html" title="PMD">PMD</a></li>
                  <li><a href="../cpd.html" title="CPD">CPD</a></li>
                  <li><a href="../spotbugs.html" title="SpotBugs">SpotBugs</a></li>
                  <li><a href="../surefire-report.html" title="Surefire Report">Surefire Report</a></li>
                  <li><a href="../jacoco/index.html" title="JaCoCo">JaCoCo</a></li>
                  <li><a href="../taglist.html" title="Tag List">Tag List</a></li>
                  <li><a href="../changelog.html" title="Change Log">Change Log</a></li>
              </ul>
            </li>
        </ul>
      </li>
            </ul>
        </div>
      </div>
    </header>
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h2>JPackage Maven Plugin</h2>
</div>
</div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
      <li class=""><a href="../index.html" title="JPackage Maven Plugin">JPackage Maven Plugin</a><span class="divider">Â»</span></li>
    <li class="active ">Create application installer avoiding any intermediate steps</li>
      <li id="projectVersion" class="pull-right">Version: 0.1.3</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="../index.html" title="Introduction"><span class="none"></span>Introduction</a></li>
    <li><a href="../plugin-info.html" title="Goals"><span class="none"></span>Goals</a></li>
    <li><a href="../usage.html" title="Usage"><span class="none"></span>Usage</a></li>
    <li><a href="../faq.html" title="FAQ"><span class="none"></span>FAQ</a></li>
   <li class="nav-header">Examples</li>
    <li><a href="../examples/from-runtime-image.html" title="Create application image from a predefined runtime image"><span class="none"></span>Create application image from a predefined runtime image</a></li>
    <li><a href="../examples/from-application-image.html" title="Create application installer from the predefined application image"><span class="none"></span>Create application installer from the predefined application image</a></li>
    <li class="active"><a href="#"><span class="none"></span>Create application installer avoiding any intermediate steps</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="../project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="../project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<h1>Create application installer avoiding any intermediate steps</h1>
<p>This method creates an application installer, avoiding the separate use of the jlink tool to create an application runtime image and the two subsequent runs of the jpackage tool to create the application image first and then to create the application installer.</p>
<p>Supposed the environment variable <b>JPACKAGE_HOME</b> contains the path to the JDK home directory containing the required version of jpackage tool.</p>
<p>Define the <b>modulepath</b> and <b>addmodules</b> tags.</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">  &lt;project&gt;
    ...
    &lt;build&gt;
      &lt;pluginManagement&gt;
        &lt;plugins&gt;
          &lt;plugin&gt;
            &lt;groupId&gt;com.github.akman&lt;/groupId&gt;
            &lt;artifactId&gt;jpackage-maven-plugin&lt;/artifactId&gt;
            &lt;version&gt;0.1.3&lt;/version&gt;
            &lt;configuration&gt;

              &lt;!--
                Specifies the JDK home path which provides the tool needed.
                If not specified the jpackage tool executable will be find in
                the following order:
              
                  - user specified JDK home directory by toolchains-plugin
                  - JDK home directory specified by system variable JAVA_HOME
                  - system path specified by system variable PATH
              --&gt;
              &lt;toolhome&gt;$&#x200d;{env.JPACKAGE_HOME}&lt;/toolhome&gt;
              
              &lt;!--
                Specifies the location in which generated output files are placed.
                Default value: $&#x200d;{project.build.directory}/jpackage
              --&gt;
              &lt;dest&gt;$&#x200d;{project.build.directory}/jpackage&lt;/dest&gt;
              
              &lt;!--
                Specifies the name of subdirectory relative to
                the destination directory in which files of generated
                application image are placed.
              --&gt;
              &lt;name&gt;appname&lt;/name&gt;
              
              &lt;!--
                Specifies version of the application and/or package.
              --&gt;
              &lt;appversion&gt;1.0&lt;/appversion&gt;
              
              &lt;!--
                Specifies copyright for the application.
              --&gt;
              &lt;copyright&gt;Copyright&lt;/copyright&gt;
              
              &lt;!--
                Specifies description of the application.
              --&gt;
              &lt;description&gt;Description&lt;/description&gt;
              
              &lt;!--
                Specifies vendor of the application.
              --&gt;
              &lt;vendor&gt;Vendor&lt;/vendor&gt;
              
              &lt;!--
                Specifies the location of the icon of the application package.
              --&gt;
              &lt;icon&gt;$&#x200d;{project.basedir}/config/jpackage/resources/appname.ico&lt;/icon&gt;
              
              &lt;!--
                Specifies the module path. The path where the jlink tool
                discovers observable modules: modular JAR files, JMOD files,
                exploded modules. If this option is not specified, then
                the default module path is $ JAVA_HOME/jmods. This directory
                contains the java.base module and the other standard and
                JDK modules. If this option is specified but the java.base
                module cannot be resolved from it, then the jlink command
                appends $ JAVA_HOME/jmods to the module path.
                Pass on &amp;dash;-modulepath option to jlink.
              
                pathelements - passed to jlink as is
                filesets - sets of files (without directories)
                dirsets - sets of directories (without files)
                dependencysets - sets of dependencies with specified includes
                                 and excludes patterns (glob: or regex:)
                                 for file names and regex patterns only
                                 for module names, and excludes
                                 for automatic modules
              --&gt;
              &lt;modulepath&gt;
                &lt;dependencysets&gt;
                  &lt;dependencyset&gt;
                    &lt;includeoutput&gt;true&lt;/includeoutput&gt;
                    &lt;excludeautomatic&gt;true&lt;/excludeautomatic&gt;
                  &lt;/dependencyset&gt;
                &lt;/dependencysets&gt;
              &lt;/modulepath&gt;
              
              &lt;!--
                Specifies the modules names (names of root modules) to add to
                the runtime image. Their transitive dependencies will add too.
                This module list, along with the main module (if specified)
                will be passed to jlink as the &amp;dash;-add-module argument.
                If not specified, either just the main module (if module
                is specified), or the default set of modules (if mainjar
                is specified) are used.
              --&gt;
              &lt;addmodules&gt;
                &lt;addmodule&gt;appModuleName&lt;/addmodule&gt;
              &lt;/addmodules&gt;
              
              &lt;!--
                Specifies the main module (and optionally main class) of
                the application. This module must be located on the module path.
                When this option is specified, the main module will be linked
                in the Java runtime image.
                Either module or main-jar option can be specified
                but not both.
              --&gt;
              &lt;module&gt;appModuleName/appClassName&lt;/module&gt;
              
              &lt;!--
                Specifies the command line arguments to pass to the main class
                if no command line arguments are given to the launcher.
              --&gt;
              &lt;arguments&gt;--opt&lt;/arguments&gt;
              
              &lt;!--
                Specifies the options to pass to the Java runtime.
              --&gt;
              &lt;javaoptions&gt;-Dfile.encoding=UTF-8 -Xms256m -Xmx512m&lt;/javaoptions&gt;
              
              &lt;!--
                Specifies options are added to, or used to overwrite,
                the original command line options to build additional
                alternative launchers.
              --&gt;
              &lt;addlaunchers&gt;
                &lt;addlauncher&gt;
                  &lt;name&gt;appname-cli&lt;/name&gt;
                  &lt;module&gt;AppModuleName/appClassName&lt;/module&gt;
                  &lt;arguments&gt;--help&lt;/arguments&gt;
                  &lt;javaoptions&gt;-Xms256m -Xmx512m&lt;/javaoptions&gt;
                  &lt;appversion&gt;1.0&lt;/appversion&gt;
                  &lt;icon&gt;$&#x200d;{project.basedir}/config/jpackage/resources/appname-cli.ico&lt;/icon&gt;
                  &lt;winconsole&gt;true&lt;/winconsole&gt;
                &lt;/addlauncher&gt;
              &lt;/addlaunchers&gt;
              
              &lt;!--
                Specifies the location of a properties file that contains
                list of key, value pairs. The keys &quot;extension&quot;, &quot;mime-type&quot;,
                &quot;icon&quot;, and &quot;description&quot; can be used to describe the association.
              --&gt;
              &lt;fileassociations&gt;$&#x200d;{project.basedir}/config/jpackage/associations.properties&lt;/fileassociations&gt;
              
              &lt;!--
                Specifies the relative sub-path under the default installation
                location of the application for Windows, or absolute path of the
                installation directory of the application for Mac or Linux.
              --&gt;
              &lt;installdir&gt;Vendor/Appname&lt;/installdir&gt;
              
              &lt;!--
                Specifies the location of a license file.
              --&gt;
              &lt;licensefile&gt;$&#x200d;{project.basedir}/config/jpackage/LICENSE&lt;/licensefile&gt;
              
              &lt;!--
                Specifies the location of a resources directory that override
                jpackage resources. Icons, template files, and other resources
                of jpackage can be overridden by adding replacement resources
                to this directory.
              --&gt;
              &lt;resourcedir&gt;$&#x200d;{project.basedir}/config/jpackage/resources&lt;/resourcedir&gt;
              
              &lt;!--
                Enable adding a dialog to choose a directory in which
                the product is installed.
                Default value: false
              --&gt;
              &lt;windirchooser&gt;true&lt;/windirchooser&gt;
              
              &lt;!--
                Enable adding the application to the system menu.
                Default value: false
              --&gt;
              &lt;winmenu&gt;true&lt;/winmenu&gt;
              
              &lt;!--
                Start menu group this application is placed in.
              --&gt;
              &lt;winmenugroup&gt;Vendor/Appname&lt;/winmenugroup&gt;
              
              &lt;!--
                Enable requesting to perform an install on a per-user basis.
                Default value: false
              --&gt;
              &lt;winperuserinstall&gt;true&lt;/winperuserinstall&gt;
              
              &lt;!--
                Enable creating a desktop shortcut for the application.
                Default value: false
              --&gt;
              &lt;winshortcut&gt;true&lt;/winshortcut&gt;
              
              &lt;!--
                UUID associated with upgrades for this package.
              --&gt;
              &lt;winupgradeuuid&gt;8CF81762-0B19-46A6-875E-1F839A1700D0&lt;/winupgradeuuid&gt;

            &lt;/configuration&gt;
          &lt;/plugin&gt;
        &lt;/plugins&gt;
      &lt;/pluginManagement&gt;
      ...
      &lt;plugins&gt;
        ...
          &lt;plugin&gt;
            &lt;groupId&gt;com.github.akman&lt;/groupId&gt;
            &lt;artifactId&gt;jpackage-maven-plugin&lt;/artifactId&gt;
            &lt;executions&gt;
              &lt;execution&gt;
                &lt;id&gt;jpackage-installer&lt;/id&gt;
                &lt;phase&gt;verify&lt;/phase&gt;
                &lt;goals&gt;
                  &lt;goal&gt;jpackage&lt;/goal&gt;
                &lt;/goals&gt;
              &lt;/execution&gt;
            &lt;/executions&gt;
          &lt;/plugin&gt;
        ...
      &lt;/plugins&gt;
    &lt;/build&gt;
    ...
  &lt;/project&gt;
</pre></div></div>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
<div class="copyright">Copyright (C) 2020 - 2021 Alexander Kapitman. All rights reserved.</div>
        </div>
      </div>
    </footer>
  </body>
</html>
